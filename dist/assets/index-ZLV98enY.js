import{r as d,a as Pr,g as Cr,R as Ir}from"./vendor-hNfcizNV.js";import{_ as $,a as ke,b as Fe,c as qe}from"./transformers-BOsqbiXW.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var ur={exports:{}},ye={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nr=d,Rr=Symbol.for("react.element"),Lr=Symbol.for("react.fragment"),Mr=Object.prototype.hasOwnProperty,Tr=Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zr={key:!0,ref:!0,__self:!0,__source:!0};function dr(e,r,t){var n,o={},a=null,s=null;t!==void 0&&(a=""+t),r.key!==void 0&&(a=""+r.key),r.ref!==void 0&&(s=r.ref);for(n in r)Mr.call(r,n)&&!zr.hasOwnProperty(n)&&(o[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps,r)o[n]===void 0&&(o[n]=r[n]);return{$$typeof:Rr,type:e,key:a,ref:s,props:o,_owner:Tr.current}}ye.Fragment=Lr;ye.jsx=dr;ye.jsxs=dr;ur.exports=ye;var i=ur.exports,fr,Ye=Pr;fr=Ye.createRoot,Ye.hydrateRoot;var pr={exports:{}},Ur="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Br=Ur,$r=Br;function mr(){}function gr(){}gr.resetWarningCache=mr;var Wr=function(){function e(n,o,a,s,u,g){if(g!==$r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function r(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:gr,resetWarningCache:mr};return t.PropTypes=t,t};pr.exports=Wr();var Gr=pr.exports;const v=Cr(Gr);function te(e,r,t,n){function o(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function u(m){try{l(n.next(m))}catch(b){s(b)}}function g(m){try{l(n.throw(m))}catch(b){s(b)}}function l(m){m.done?a(m.value):o(m.value).then(u,g)}l((n=n.apply(e,r||[])).next())})}function ne(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(l){return function(m){return g([l,m])}}function g(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(t=0)),t;)try{if(n=1,o&&(a=l[0]&2?o.return:l[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,l[1])).done)return a;switch(o=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,o=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){t.label=l[1];break}if(l[0]===6&&t.label<a[1]){t.label=a[1],a=l;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(l);break}a[2]&&t.ops.pop(),t.trys.pop();continue}l=r.call(e,t)}catch(m){l=[6,m],o=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Qe(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,a=[],s;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return a}function Je(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,a;n<o;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))}var Kr=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function se(e,r){var t=Hr(e);if(typeof t.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof r=="string"?r:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Hr(e){var r=e.name,t=r&&r.lastIndexOf(".")!==-1;if(t&&!e.type){var n=r.split(".").pop().toLowerCase(),o=Kr.get(n);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}var Vr=[".DS_Store","Thumbs.db"];function qr(e){return te(this,void 0,void 0,function(){return ne(this,function(r){return ge(e)&&Yr(e.dataTransfer)?[2,Zr(e.dataTransfer,e.type)]:Qr(e)?[2,Jr(e)]:Array.isArray(e)&&e.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Xr(e)]:[2,[]]})})}function Yr(e){return ge(e)}function Qr(e){return ge(e)&&ge(e.target)}function ge(e){return typeof e=="object"&&e!==null}function Jr(e){return Pe(e.target.files).map(function(r){return se(r)})}function Xr(e){return te(this,void 0,void 0,function(){var r;return ne(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return r=t.sent(),[2,r.map(function(n){return se(n)})]}})})}function Zr(e,r){return te(this,void 0,void 0,function(){var t,n;return ne(this,function(o){switch(o.label){case 0:return e.items?(t=Pe(e.items).filter(function(a){return a.kind==="file"}),r!=="drop"?[2,t]:[4,Promise.all(t.map(et))]):[3,2];case 1:return n=o.sent(),[2,Xe(hr(n))];case 2:return[2,Xe(Pe(e.files).map(function(a){return se(a)}))]}})})}function Xe(e){return e.filter(function(r){return Vr.indexOf(r.name)===-1})}function Pe(e){if(e===null)return[];for(var r=[],t=0;t<e.length;t++){var n=e[t];r.push(n)}return r}function et(e){if(typeof e.webkitGetAsEntry!="function")return Ze(e);var r=e.webkitGetAsEntry();return r&&r.isDirectory?br(r):Ze(e)}function hr(e){return e.reduce(function(r,t){return Je(Je([],Qe(r),!1),Qe(Array.isArray(t)?hr(t):[t]),!1)},[])}function Ze(e){var r=e.getAsFile();if(!r)return Promise.reject("".concat(e," is not a File"));var t=se(r);return Promise.resolve(t)}function rt(e){return te(this,void 0,void 0,function(){return ne(this,function(r){return[2,e.isDirectory?br(e):tt(e)]})})}function br(e){var r=e.createReader();return new Promise(function(t,n){var o=[];function a(){var s=this;r.readEntries(function(u){return te(s,void 0,void 0,function(){var g,l,m;return ne(this,function(b){switch(b.label){case 0:if(u.length)return[3,5];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return g=b.sent(),t(g),[3,4];case 3:return l=b.sent(),n(l),[3,4];case 4:return[3,6];case 5:m=Promise.all(u.map(rt)),o.push(m),a(),b.label=6;case 6:return[2]}})})},function(u){n(u)})}a()})}function tt(e){return te(this,void 0,void 0,function(){return ne(this,function(r){return[2,new Promise(function(t,n){e.file(function(o){var a=se(o,e.fullPath);t(a)},function(o){n(o)})})]})})}var nt=function(e,r){if(e&&r){var t=Array.isArray(r)?r:r.split(","),n=e.name||"",o=(e.type||"").toLowerCase(),a=o.replace(/\/.*$/,"");return t.some(function(s){var u=s.trim().toLowerCase();return u.charAt(0)==="."?n.toLowerCase().endsWith(u):u.endsWith("/*")?a===u.replace(/\/.*$/,""):o===u})}return!0};function er(e){return it(e)||at(e)||vr(e)||ot()}function ot(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function at(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function it(e){if(Array.isArray(e))return Ce(e)}function rr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function tr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?rr(Object(t),!0).forEach(function(n){yr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rr(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function yr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ie(e,r){return lt(e)||ct(e,r)||vr(e,r)||st()}function st(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vr(e,r){if(e){if(typeof e=="string")return Ce(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ce(e,r)}}function Ce(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function ct(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],o=!0,a=!1,s,u;try{for(t=t.call(e);!(o=(s=t.next()).done)&&(n.push(s.value),!(r&&n.length===r));o=!0);}catch(g){a=!0,u=g}finally{try{!o&&t.return!=null&&t.return()}finally{if(a)throw u}}return n}}function lt(e){if(Array.isArray(e))return e}var ut="file-invalid-type",dt="file-too-large",ft="file-too-small",pt="too-many-files",mt=function(r){r=Array.isArray(r)&&r.length===1?r[0]:r;var t=Array.isArray(r)?"one of ".concat(r.join(", ")):r;return{code:ut,message:"File type must be ".concat(t)}},nr=function(r){return{code:dt,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},or=function(r){return{code:ft,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},gt={code:pt,message:"Too many files"};function xr(e,r){var t=e.type==="application/x-moz-file"||nt(e,r);return[t,t?null:mt(r)]}function wr(e,r,t){if(Y(e.size))if(Y(r)&&Y(t)){if(e.size>t)return[!1,nr(t)];if(e.size<r)return[!1,or(r)]}else{if(Y(r)&&e.size<r)return[!1,or(r)];if(Y(t)&&e.size>t)return[!1,nr(t)]}return[!0,null]}function Y(e){return e!=null}function ht(e){var r=e.files,t=e.accept,n=e.minSize,o=e.maxSize,a=e.multiple,s=e.maxFiles,u=e.validator;return!a&&r.length>1||a&&s>=1&&r.length>s?!1:r.every(function(g){var l=xr(g,t),m=ie(l,1),b=m[0],_=wr(g,n,o),I=ie(_,1),N=I[0],L=u?u(g):null;return b&&N&&!L})}function he(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function me(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function ar(e){e.preventDefault()}function bt(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function yt(e){return e.indexOf("Edge/")!==-1}function vt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return bt(e)||yt(e)}function z(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n){for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];return r.some(function(u){return!he(n)&&u&&u.apply(void 0,[n].concat(a)),he(n)})}}function xt(){return"showOpenFilePicker"in window}function wt(e){if(Y(e)){var r=Object.entries(e).filter(function(t){var n=ie(t,2),o=n[0],a=n[1],s=!0;return jr(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),s=!1),(!Array.isArray(a)||!a.every(Ar))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),s=!1),s}).reduce(function(t,n){var o=ie(n,2),a=o[0],s=o[1];return tr(tr({},t),{},yr({},a,s))},{});return[{description:"Files",accept:r}]}return e}function jt(e){if(Y(e))return Object.entries(e).reduce(function(r,t){var n=ie(t,2),o=n[0],a=n[1];return[].concat(er(r),[o],er(a))},[]).filter(function(r){return jr(r)||Ar(r)}).join(",")}function At(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Dt(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function jr(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function Ar(e){return/^.*\.[\w]+$/.test(e)}var Et=["children"],Ot=["open"],_t=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],St=["refKey","onChange","onClick"];function kt(e){return Ct(e)||Pt(e)||Dr(e)||Ft()}function Ft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ct(e){if(Array.isArray(e))return Ie(e)}function _e(e,r){return Rt(e)||Nt(e,r)||Dr(e,r)||It()}function It(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dr(e,r){if(e){if(typeof e=="string")return Ie(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ie(e,r)}}function Ie(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Nt(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],o=!0,a=!1,s,u;try{for(t=t.call(e);!(o=(s=t.next()).done)&&(n.push(s.value),!(r&&n.length===r));o=!0);}catch(g){a=!0,u=g}finally{try{!o&&t.return!=null&&t.return()}finally{if(a)throw u}}return n}}function Rt(e){if(Array.isArray(e))return e}function ir(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ir(Object(t),!0).forEach(function(n){Ne(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ir(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ne(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function be(e,r){if(e==null)return{};var t=Lt(e,r),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function Lt(e,r){if(e==null)return{};var t={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(r.indexOf(o)>=0)&&(t[o]=e[o]);return t}var Me=d.forwardRef(function(e,r){var t=e.children,n=be(e,Et),o=Or(n),a=o.open,s=be(o,Ot);return d.useImperativeHandle(r,function(){return{open:a}},[a]),Ir.createElement(d.Fragment,null,t(w(w({},s),{},{open:a})))});Me.displayName="Dropzone";var Er={disabled:!1,getFilesFromEvent:qr,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Me.defaultProps=Er;Me.propTypes={children:v.func,accept:v.objectOf(v.arrayOf(v.string)),multiple:v.bool,preventDropOnDocument:v.bool,noClick:v.bool,noKeyboard:v.bool,noDrag:v.bool,noDragEventsBubbling:v.bool,minSize:v.number,maxSize:v.number,maxFiles:v.number,disabled:v.bool,getFilesFromEvent:v.func,onFileDialogCancel:v.func,onFileDialogOpen:v.func,useFsAccessApi:v.bool,autoFocus:v.bool,onDragEnter:v.func,onDragLeave:v.func,onDragOver:v.func,onDrop:v.func,onDropAccepted:v.func,onDropRejected:v.func,onError:v.func,validator:v.func};var Re={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Or(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=w(w({},Er),e),t=r.accept,n=r.disabled,o=r.getFilesFromEvent,a=r.maxSize,s=r.minSize,u=r.multiple,g=r.maxFiles,l=r.onDragEnter,m=r.onDragLeave,b=r.onDragOver,_=r.onDrop,I=r.onDropAccepted,N=r.onDropRejected,L=r.onFileDialogCancel,M=r.onFileDialogOpen,Q=r.useFsAccessApi,W=r.autoFocus,G=r.preventDropOnDocument,U=r.noClick,K=r.noKeyboard,H=r.noDrag,y=r.noDragEventsBubbling,x=r.onError,h=r.validator,j=d.useMemo(function(){return jt(t)},[t]),f=d.useMemo(function(){return wt(t)},[t]),D=d.useMemo(function(){return typeof M=="function"?M:sr},[M]),T=d.useMemo(function(){return typeof L=="function"?L:sr},[L]),F=d.useRef(null),A=d.useRef(null),k=d.useReducer(Mt,Re),V=_e(k,2),J=V[0],P=V[1],S=J.isFocused,Te=J.isFileDialogActive,ce=d.useRef(typeof window<"u"&&window.isSecureContext&&Q&&xt()),ze=function(){!ce.current&&Te&&setTimeout(function(){if(A.current){var p=A.current.files;p.length||(P({type:"closeDialog"}),T())}},300)};d.useEffect(function(){return window.addEventListener("focus",ze,!1),function(){window.removeEventListener("focus",ze,!1)}},[A,Te,T,ce]);var X=d.useRef([]),Ue=function(p){F.current&&F.current.contains(p.target)||(p.preventDefault(),X.current=[])};d.useEffect(function(){return G&&(document.addEventListener("dragover",ar,!1),document.addEventListener("drop",Ue,!1)),function(){G&&(document.removeEventListener("dragover",ar),document.removeEventListener("drop",Ue))}},[F,G]),d.useEffect(function(){return!n&&W&&F.current&&F.current.focus(),function(){}},[F,W,n]);var q=d.useCallback(function(c){x?x(c):console.error(c)},[x]),Be=d.useCallback(function(c){c.preventDefault(),c.persist(),fe(c),X.current=[].concat(kt(X.current),[c.target]),me(c)&&Promise.resolve(o(c)).then(function(p){if(!(he(c)&&!y)){var E=p.length,C=E>0&&ht({files:p,accept:j,minSize:s,maxSize:a,multiple:u,maxFiles:g,validator:h}),R=E>0&&!C;P({isDragAccept:C,isDragReject:R,isDragActive:!0,type:"setDraggedFiles"}),l&&l(c)}}).catch(function(p){return q(p)})},[o,l,q,y,j,s,a,u,g,h]),$e=d.useCallback(function(c){c.preventDefault(),c.persist(),fe(c);var p=me(c);if(p&&c.dataTransfer)try{c.dataTransfer.dropEffect="copy"}catch{}return p&&b&&b(c),!1},[b,y]),We=d.useCallback(function(c){c.preventDefault(),c.persist(),fe(c);var p=X.current.filter(function(C){return F.current&&F.current.contains(C)}),E=p.indexOf(c.target);E!==-1&&p.splice(E,1),X.current=p,!(p.length>0)&&(P({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),me(c)&&m&&m(c))},[F,m,y]),le=d.useCallback(function(c,p){var E=[],C=[];c.forEach(function(R){var oe=xr(R,j),re=_e(oe,2),xe=re[0],we=re[1],je=wr(R,s,a),pe=_e(je,2),Ae=pe[0],De=pe[1],Ee=h?h(R):null;if(xe&&Ae&&!Ee)E.push(R);else{var Oe=[we,De];Ee&&(Oe=Oe.concat(Ee)),C.push({file:R,errors:Oe.filter(function(Fr){return Fr})})}}),(!u&&E.length>1||u&&g>=1&&E.length>g)&&(E.forEach(function(R){C.push({file:R,errors:[gt]})}),E.splice(0)),P({acceptedFiles:E,fileRejections:C,type:"setFiles"}),_&&_(E,C,p),C.length>0&&N&&N(C,p),E.length>0&&I&&I(E,p)},[P,u,j,s,a,g,_,I,N,h]),ue=d.useCallback(function(c){c.preventDefault(),c.persist(),fe(c),X.current=[],me(c)&&Promise.resolve(o(c)).then(function(p){he(c)&&!y||le(p,c)}).catch(function(p){return q(p)}),P({type:"reset"})},[o,le,q,y]),Z=d.useCallback(function(){if(ce.current){P({type:"openDialog"}),D();var c={multiple:u,types:f};window.showOpenFilePicker(c).then(function(p){return o(p)}).then(function(p){le(p,null),P({type:"closeDialog"})}).catch(function(p){At(p)?(T(p),P({type:"closeDialog"})):Dt(p)?(ce.current=!1,A.current?(A.current.value=null,A.current.click()):q(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):q(p)});return}A.current&&(P({type:"openDialog"}),D(),A.current.value=null,A.current.click())},[P,D,T,Q,le,q,f,u]),Ge=d.useCallback(function(c){!F.current||!F.current.isEqualNode(c.target)||(c.key===" "||c.key==="Enter"||c.keyCode===32||c.keyCode===13)&&(c.preventDefault(),Z())},[F,Z]),Ke=d.useCallback(function(){P({type:"focus"})},[]),He=d.useCallback(function(){P({type:"blur"})},[]),Ve=d.useCallback(function(){U||(vt()?setTimeout(Z,0):Z())},[U,Z]),ee=function(p){return n?null:p},ve=function(p){return K?null:ee(p)},de=function(p){return H?null:ee(p)},fe=function(p){y&&p.stopPropagation()},_r=d.useMemo(function(){return function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=c.refKey,E=p===void 0?"ref":p,C=c.role,R=c.onKeyDown,oe=c.onFocus,re=c.onBlur,xe=c.onClick,we=c.onDragEnter,je=c.onDragOver,pe=c.onDragLeave,Ae=c.onDrop,De=be(c,_t);return w(w(Ne({onKeyDown:ve(z(R,Ge)),onFocus:ve(z(oe,Ke)),onBlur:ve(z(re,He)),onClick:ee(z(xe,Ve)),onDragEnter:de(z(we,Be)),onDragOver:de(z(je,$e)),onDragLeave:de(z(pe,We)),onDrop:de(z(Ae,ue)),role:typeof C=="string"&&C!==""?C:"presentation"},E,F),!n&&!K?{tabIndex:0}:{}),De)}},[F,Ge,Ke,He,Ve,Be,$e,We,ue,K,H,n]),Sr=d.useCallback(function(c){c.stopPropagation()},[]),kr=d.useMemo(function(){return function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=c.refKey,E=p===void 0?"ref":p,C=c.onChange,R=c.onClick,oe=be(c,St),re=Ne({accept:j,multiple:u,type:"file",style:{display:"none"},onChange:ee(z(C,ue)),onClick:ee(z(R,Sr)),tabIndex:-1},E,A);return w(w({},re),oe)}},[A,t,u,ue,n]);return w(w({},J),{},{isFocused:S&&!n,getRootProps:_r,getInputProps:kr,rootRef:F,inputRef:A,open:ee(Z)})}function Mt(e,r){switch(r.type){case"focus":return w(w({},e),{},{isFocused:!0});case"blur":return w(w({},e),{},{isFocused:!1});case"openDialog":return w(w({},Re),{},{isFileDialogActive:!0});case"closeDialog":return w(w({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return w(w({},e),{},{isDragActive:r.isDragActive,isDragAccept:r.isDragAccept,isDragReject:r.isDragReject});case"setFiles":return w(w({},e),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections});case"reset":return w({},Re);default:return e}}function sr(){}const Tt=[{id:"color",label:"Solid Color"},{id:"image",label:"Image"}],zt=[{id:"none",label:"None"},{id:"blur",label:"Blur"},{id:"brightness",label:"Bright"},{id:"contrast",label:"Contrast"}],Ut=["#ffffff","#000000","#ff0000","#00ff00","#0000ff","#ffff00","#00ffff","#ff00ff","#808080","#c0c0c0"];function Bt({image:e,isOpen:r,onClose:t,onSave:n}){const[o,a]=d.useState("color"),[s,u]=d.useState("#ffffff"),[g,l]=d.useState(null),[m,b]=d.useState("none"),[_,I]=d.useState(50),[N,L]=d.useState(50),[M,Q]=d.useState(50),[W,G]=d.useState(""),[U,K]=d.useState(!1),H=e.processedFile?URL.createObjectURL(e.processedFile):"";d.useEffect(()=>{e.processedFile&&h()},[o,s,g,m,_,N,M]);const y=()=>{switch(m){case"blur":return _;case"brightness":return N;case"contrast":return M;default:return 50}},x=f=>{switch(m){case"blur":I(f);break;case"brightness":L(f);break;case"contrast":Q(f);break}},h=async()=>{if(!e.processedFile)return;const f=document.createElement("canvas"),D=f.getContext("2d");if(!D)return;const T=new Image;if(T.src=H,await new Promise(A=>T.onload=A),f.width=T.width,f.height=T.height,o==="color")D.fillStyle=s,D.fillRect(0,0,f.width,f.height);else if(o==="image"&&g){const A=new Image;A.src=URL.createObjectURL(g),await new Promise(k=>A.onload=k),D.drawImage(A,0,0,f.width,f.height)}if(D.drawImage(T,0,0),m!=="none"){const A=D.getImageData(0,0,f.width,f.height),k=A.data;switch(m){case"blur":const V=document.createElement("canvas"),J=V.getContext("2d");if(!J)break;V.width=f.width,V.height=f.height,J.drawImage(f,0,0),D.clearRect(0,0,f.width,f.height),D.filter=`blur(${_/10}px)`,D.drawImage(V,0,0),D.filter="none";break;case"brightness":for(let S=0;S<k.length;S+=4)k[S]=Math.min(255,k[S]*(N/50)),k[S+1]=Math.min(255,k[S+1]*(N/50)),k[S+2]=Math.min(255,k[S+2]*(N/50));D.putImageData(A,0,0);break;case"contrast":const P=259*(M+255)/(255*(259-M));for(let S=0;S<k.length;S+=4)k[S]=P*(k[S]-128)+128,k[S+1]=P*(k[S+1]-128)+128,k[S+2]=P*(k[S+2]-128)+128;D.putImageData(A,0,0);break}}const F=f.toDataURL("image/png");G(F)},j=()=>{n(W),t()};return r?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{id:"edit-image-title",className:"text-xl font-semibold text-gray-800",children:"Edit Image"}),i.jsx("button",{id:"btn-close-edit",onClick:t,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("h3",{id:"bg-heading",className:"font-medium text-gray-700 mb-2",children:"Background"}),i.jsx("div",{className:"flex gap-2 mb-4",children:Tt.map(f=>i.jsx("button",{id:`bg-option-${f.id}`,onClick:()=>a(f.id),className:`px-3 py-1 rounded ${o===f.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:i.jsx("span",{id:"bg-option-"+f.id,children:f.label})},f.id))}),o==="color"&&i.jsxs("div",{children:[i.jsx("div",{className:"flex gap-2 mb-2",children:Ut.map(f=>i.jsx("button",{onClick:()=>u(f),className:"w-8 h-8 rounded-full border border-gray-300",style:{backgroundColor:f}},f))}),i.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[i.jsx("button",{id:"custom-color-btn",onClick:()=>K(!U),className:"px-3 py-1.5 bg-white border border-gray-200 rounded-md hover:bg-gray-50 transition-colors text-sm text-gray-700",children:"Custom Color"}),U&&i.jsx("input",{type:"color",value:s,onChange:f=>u(f.target.value),className:"w-8 h-8 border border-gray-400 rounded-md hover:bg-blue-200"})]})]}),o==="image"&&i.jsx("input",{type:"file",accept:"image/*",onChange:f=>l(f.target.files?.[0]||null),className:"w-full"})]})}),i.jsxs("div",{children:[i.jsx("h3",{id:"preview-heading",className:"font-medium text-gray-700 mb-2",children:"Preview"}),i.jsx("div",{className:"border rounded-lg overflow-hidden",children:i.jsx("img",{src:W||H,alt:"Preview",className:"w-full object-contain"})})]}),i.jsxs("div",{className:"effects-container",children:[i.jsx("h3",{id:"effects-heading",className:"font-medium text-gray-700 mb-2",children:"Effects"}),i.jsx("div",{className:"flex gap-2 mb-4",children:zt.map(f=>i.jsx("button",{id:`effect-option-${f.id}`,onClick:()=>b(f.id),className:`px-3 py-1 rounded ${m===f.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:i.jsx("span",{id:"option-effect-"+f.id,children:f.label})},f.id))}),m!=="none"&&i.jsxs("div",{children:[i.jsx("input",{type:"range",min:"0",max:"100",value:y(),onChange:f=>x(Number(f.target.value)),className:"w-full"}),i.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[i.jsx("span",{id:"effect-min",children:"0"}),i.jsx("span",{id:"effect-value",children:y()}),i.jsx("span",{id:"effect-max",children:"100"})]})]})]})]}),i.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[i.jsx("button",{id:"btn-cancel-edit",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded hover:bg-gray-200",children:"Cancel"}),i.jsx("button",{id:"btn-save-edit",onClick:j,className:"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600",children:"Save Changes"})]})]})}):null}function $t({images:e,onDelete:r}){return i.jsxs("div",{children:[i.jsxs("h2",{className:"hidden text-gray-800 text-xl font-semibold mb-4",children:["Images: ",e.length]}),i.jsx("div",{className:"gap-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:e.map(t=>t.file.type.includes("video")?i.jsx(Wt,{video:t},t.id):i.jsx(Ht,{image:t,onDelete:r},t.id))})]})}function Wt({video:e}){const r=URL.createObjectURL(e.file);return i.jsx("div",{className:"bg-white rounded-lg shadow-md p-3",children:i.jsx("video",{className:"rounded-lg aspect-square object-cover",loop:!0,muted:!0,autoPlay:!0,src:r})})}function Se(e){return new Promise((r,t)=>{const n=new FileReader;n.onerror=()=>t(new Error("Failed to read blob as data URL")),n.onloadend=()=>r(n.result),n.readAsDataURL(e)})}async function Gt(e){if(!e)return;const r=e.processedFile||e.file;if(r){if(e.processedUrl&&typeof e.processedUrl=="string"&&e.processedUrl.startsWith("data:"))return cr(e.processedUrl,e);try{let t;if(r instanceof Blob)t=await Se(r);else if(typeof r=="string"&&(r.startsWith("blob:")||r.startsWith("http"))){const o=await(await fetch(r)).blob();t=await Se(o)}else t=await Se(r);return cr(t,e)}catch{}}}function cr(e,r){const t=`Image ${r&&r.id?r.id:""}`,o='<!DOCTYPE html><html><head><meta charset="utf-8"></head><body>'+`<img src="${e}" alt="${Kt(t)}" style="max-width:100%;height:auto;" />`+"</body></html>";if(typeof window<"u"&&window.hasOwnProperty("Asc")&&window.Asc.hasOwnProperty("plugin")&&typeof window.Asc.plugin.executeMethod=="function")try{window.Asc.plugin.executeMethod("PasteHtml",[o],function(){console.info("Image pasted into document.")})}catch(a){if(console.error("Asc PasteHtml failed:",a),typeof window<"u"){const s=e;window.open(s,"_blank")}}else typeof window<"u"&&window.open(e,"_blank")}function Kt(e){const r=String(e),t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return r.replace(/[&<>"']/g,n=>t[n]??"")}function Ht({image:e,onDelete:r}){const[t,n]=d.useState(!1),[o,a]=d.useState(""),s=URL.createObjectURL(e.file),u=e.processedFile?URL.createObjectURL(e.processedFile):"",g=!e.processedFile,l=b=>{a(b)};return i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsx("div",{className:"relative",children:g?i.jsxs("div",{className:"relative",children:[i.jsx("img",{className:"w-full aspect-square object-cover opacity-50 transition-opacity duration-200",src:s,alt:`Processing image ${e.id}`}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsxs("div",{className:"bg-black bg-opacity-50 px-4 py-2 rounded-lg",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),i.jsx("span",{className:"text-white font-medium processing-text",children:"Processing..."})]})})]}):i.jsx("div",{className:"w-full aspect-square",style:{background:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURb+/v////5nD/3QAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAUSURBVBjTYwABQSCglEENMxgYGAAynwRB8BEAgQAAAABJRU5ErkJggg==")',backgroundRepeat:"repeat"},children:i.jsx("img",{className:"w-full h-full object-cover transition-opacity duration-200",src:o||u,alt:`Processed image ${e.id}`})})}),!g&&i.jsx("div",{className:"p-3 border-t border-gray-100",children:i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsx("button",{onClick:()=>r(e.id),className:"btn-action btn-delete-label flex items-center gap-1 px-3 py-1.5 bg-white border border-gray-200 rounded-md hover:bg-gray-50 transition-colors",children:i.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),i.jsx("button",{onClick:()=>n(!0),className:"btn-action btn-edit-label flex items-center gap-1 px-3 py-1.5 bg-white border border-gray-200 rounded-md hover:bg-gray-50 transition-colors",children:i.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),i.jsx("a",{href:o||u,download:`processed-${e.id}.png`,className:"btn-action btn-download-label flex items-center gap-1 px-3 py-1.5 bg-white border border-gray-200 rounded-md hover:bg-gray-50 transition-colors",children:i.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),typeof window<"u"&&window.hasOwnProperty("Asc")&&window.Asc.hasOwnProperty("plugin")&&window.Asc.plugin.hasOwnProperty("executeCommand")&&i.jsx("button",{onClick:()=>Gt(e),className:"btn-action btn-insert-label flex items-center gap-1 px-3 py-1.5 bg-white border border-gray-200 rounded-md hover:bg-gray-50 transition-colors",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{height:"1.3rem"},fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6 text-purple-600",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"})})})]})}),i.jsx(Bt,{image:e,isOpen:t,onClose:()=>n(!1),onSave:l})]})}const ae="Xenova/modnet",B="briaai/RMBG-1.4",Vt=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,O={model:null,processor:null,isWebGPUSupported:!1,currentModelId:B,isIOS:Vt()};async function qt(){const e=navigator.gpu;if(!e)return!1;try{return await e.requestAdapter()?($.allowLocalModels=!1,$.backends?.onnx?.wasm&&($.backends.onnx.wasm.proxy=!1),await new Promise(t=>setTimeout(t,100)),O.model=await ke.from_pretrained(ae,{device:"webgpu",config:{model_type:"modnet",architectures:["MODNet"]}}),O.processor=await Fe.from_pretrained(ae),O.isWebGPUSupported=!0,!0):!1}catch(r){return console.error("WebGPU initialization failed:",r),!1}}async function Le(e){try{if(O.isIOS)return console.log("iOS detected, using RMBG-1.4 model"),$.allowLocalModels=!1,$.backends?.onnx?.wasm&&($.backends.onnx.wasm.proxy=!0),O.model=await ke.from_pretrained(B,{config:{model_type:"custom"}}),O.processor=await Fe.from_pretrained(B,{config:{do_normalize:!0,do_pad:!1,do_rescale:!0,do_resize:!0,image_mean:[.5,.5,.5],feature_extractor_type:"ImageFeatureExtractor",image_std:[1,1,1],resample:2,rescale_factor:.00392156862745098,size:{width:1024,height:1024}}}),O.currentModelId=B,!0;const r=e||B;if(r===ae&&await qt())return O.currentModelId=ae,!0;if($.allowLocalModels=!1,$.backends?.onnx?.wasm&&($.backends.onnx.wasm.proxy=!0),O.model=await ke.from_pretrained(B,{progress_callback:t=>{console.log(`Loading model: ${Math.round(t*100)}%`)}}),O.processor=await Fe.from_pretrained(B,{revision:"main",config:{do_normalize:!0,do_pad:!0,do_rescale:!0,do_resize:!0,image_mean:[.5,.5,.5],feature_extractor_type:"ImageFeatureExtractor",image_std:[.5,.5,.5],resample:2,rescale_factor:.00392156862745098,size:{width:1024,height:1024}}}),O.currentModelId=B,!O.model||!O.processor)throw new Error("Failed to initialize model or processor");return O.currentModelId=r,!0}catch(r){if(console.error("Error initializing model:",r),e===ae)return console.log("Falling back to cross-browser model..."),Le(B);throw new Error(r instanceof Error?r.message:"Failed to initialize background removal model")}}function lr(){return{currentModelId:O.currentModelId,isWebGPUSupported:!!navigator.gpu,isIOS:O.isIOS}}async function Yt(e){if(!O.model||!O.processor)throw new Error("Model not initialized. Call initializeModel() first.");const r=await qe.fromURL(URL.createObjectURL(e));try{const{pixel_values:t}=await O.processor(r),{output:n}=await O.model({input:t}),o=(await qe.fromTensor(n[0].mul(255).to("uint8")).resize(r.width,r.height)).data,a=document.createElement("canvas");a.width=r.width,a.height=r.height;const s=a.getContext("2d");if(!s)throw new Error("Could not get 2d context");s.drawImage(r.toCanvas(),0,0);const u=s.getImageData(0,0,r.width,r.height);for(let b=0;b<o.length;++b)u.data[4*b+3]=o[b];s.putImageData(u,0,0);const g=await new Promise((b,_)=>a.toBlob(I=>I?b(I):_(new Error("Failed to create blob")),"image/png")),[l]=e.name.split(".");return new File([g],`${l}-bg-blasted.png`,{type:"image/png"})}catch(t){throw console.error("Error processing image:",t),new Error("Failed to process image")}}async function Qt(e){console.log("Processing images...");const r=[];for(const t of e)try{const n=await Yt(t);r.push(n),console.log("Successfully processed image",t.name)}catch(n){console.error("Error processing image",t.name,n)}return console.log("Processing images done"),r}const Jt=["./examples/photo-1601233749202-95d04d5b3c00.jfif","./examples/photo-1513013156887-d2bf241c8c82.jfif","./examples/photo-1643490745745-e8ca9a3a1c90.jfif","./examples/photo-1574158622682-e40e69881006.jfif"],Xt=()=>{const e=window.navigator.userAgent,r=!!e.match(/iPad/i)||!!e.match(/iPhone/i),t=!!e.match(/WebKit/i);return r&&t&&!e.match(/CriOS/i)&&!e.match(/OPiOS/i)&&!e.match(/FxiOS/i)&&"ontouchend"in document};function Zt(){const[e,r]=d.useState(!0),[t,n]=d.useState(null),[o,a]=d.useState(!1),[s,u]=d.useState(!1),[g,l]=d.useState("briaai/RMBG-1.4"),[m,b]=d.useState(!1),[_,I]=d.useState([]);if(d.useEffect(()=>{if(Xt()){window.location.href="https://bg-mobile.addy.ie";return}const{isIOS:y}=lr();return u(y),r(!1),window.passImageFile=x=>{x&&L([x])},()=>{delete window.passImageFile}},[]),window&&window.Asc?.plugin?.theme?.da){const y=window.Asc?.plugin?.theme?.da||"light";document.body.classList.toggle("dark-mode",y==="dark")}const N=async y=>{const x=y.target.value;b(!0),n(null);try{if(!await Le(x))throw new Error("Failed to initialize new model");l(x)}catch(h){h instanceof Error&&h.message.includes("Falling back")?l("briaai/RMBG-1.4"):n({message:h instanceof Error?h.message:"Failed to switch models"})}finally{b(!1)}},L=d.useCallback(async y=>{const x=y.map((h,j)=>({id:Date.now()+j,file:h,processedFile:void 0}));if(I(h=>[...h,...x]),_.length===0){r(!0),n(null);try{if(!await Le())throw new Error("Failed to initialize background removal model");const{isWebGPUSupported:j}=lr();a(j)}catch(h){n({message:h instanceof Error?h.message:"An unknown error occurred"}),I([]),r(!1);return}r(!1)}for(const h of x)try{const j=await Qt([h.file]);j&&j.length>0&&I(f=>f.map(D=>D.id===h.id?{...D,processedFile:j[0]}:D))}catch(j){console.error("Error processing image:",j)}},[_.length]),M=async y=>{const x=y.clipboardData.items,h=[];for(const j of x)if(j.type.startsWith("image")){const f=j.getAsFile();f&&h.push(f)}h.length>0&&L(h)},Q=async y=>{try{const h=await(await fetch(y)).blob(),j=new File([h],"sample-image.jpg",{type:"image/jpeg"});L([j])}catch(x){console.error("Error loading sample image:",x)}},{getRootProps:W,getInputProps:G,isDragActive:U,isDragAccept:K,isDragReject:H}=Or({onDrop:L,accept:{"image/*":[".jpeg",".jpg",".png",".mp4"]}});return i.jsxs("div",{className:"min-h-screen bg-gray-50",onPaste:M,children:[i.jsx("nav",{className:"bg-white shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{id:"title-bg",className:"text-2xl font-bold text-gray-800",children:"BG"}),!s&&i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{id:"model-label",className:"text-gray-600",children:"Model:"}),i.jsxs("select",{value:g,onChange:N,className:"bg-white border border-gray-300 rounded-md px-3 py-1 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!o,children:[i.jsx("option",{id:"option-rmbg",value:"briaai/RMBG-1.4",children:"RMBG-1.4 (Cross-browser)"}),o&&i.jsx("option",{id:"option-modnet",value:"Xenova/modnet",children:"MODNet (WebGPU)"})]})]})]}),s&&i.jsx("p",{id:"ios-info",className:"text-sm text-gray-500 mt-2",children:"Using optimized iOS background removal"})]})}),i.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.jsxs("div",{className:`grid ${_.length===0?"grid-cols-2 gap-8":"grid-cols-1"}`,children:[_.length===0&&i.jsxs("div",{className:"flex flex-col justify-center items-start",children:[i.jsx("img",{src:"hero.png",alt:"Surprised man",className:"mb-6 w-full object-cover h-[400px]"}),i.jsx("h2",{id:"hero-title",className:"text-3xl font-bold text-gray-800 mb-4",children:"Remove Image Background"}),i.jsx("p",{id:"hero-subtitle",className:"text-lg text-gray-600 mb-4",children:"100% Automatically and Free"}),i.jsx("p",{id:"hero-description",className:"text-gray-500 mb-4",children:"Upload your image and let our AI remove the background instantly. Perfect for professional photos, product images, and more."}),i.jsx("p",{id:"hero-credit",className:"text-sm text-gray-300 mt-4",children:"Built with love by Addy Osmani using Transformers.js"})]}),i.jsxs("div",{className:_.length===0?"":"w-full",children:[i.jsxs("div",{...W(),className:`p-8 mb-8 border-2 border-dashed rounded-lg text-center cursor-pointer transition-colors duration-300 ease-in-out bg-white
                ${K?"border-green-500 bg-green-50":""}
                ${H?"border-red-500 bg-red-50":""}
                ${U?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-500 hover:bg-blue-50"}
                ${e||m?"cursor-not-allowed":""}
              `,children:[i.jsx("input",{...G(),className:"hidden",disabled:e||m}),i.jsx("div",{className:"flex flex-col items-center gap-2",children:e||m?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mb-2"}),i.jsx("p",{id:m?"switching-models-message":"loading-message",className:"text-lg text-gray-600",children:m?"Switching models...":"Loading background removal model..."})]}):t?i.jsxs(i.Fragment,{children:[i.jsx("svg",{className:"w-12 h-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),i.jsx("p",{id:"error-message",className:"text-lg text-red-600 font-medium mb-2",children:t.message}),g==="Xenova/modnet"&&i.jsx("button",{onClick:y=>{y.stopPropagation(),N({target:{value:"briaai/RMBG-1.4"}})},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Switch to Cross-browser Version"})]}):i.jsxs(i.Fragment,{children:[i.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),i.jsx("p",{id:U?"dropzone-prompt-active":"dropzone-prompt-default",className:"text-lg text-gray-600",children:U?"Drop the images here...":"Drag and drop images here"}),i.jsx("p",{id:"dropzone-instruction",className:"text-sm text-gray-500",children:"or click to select files"})]})})]}),_.length===0&&i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[i.jsx("h3",{id:"sample-heading",className:"text-xl text-gray-700 font-semibold mb-4",children:"No image? Try one of these:"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Jt.map((y,x)=>i.jsx("button",{onClick:()=>Q(y),className:"relative aspect-square overflow-hidden rounded-lg hover:opacity-90 transition-opacity focus:outline-none focus:ring-2 focus:ring-blue-500",children:i.jsx("img",{src:y,alt:`Sample ${x+1}`,className:"w-full h-full object-cover"})},x))}),i.jsx("p",{id:"sample-note",className:"text-sm text-gray-500 mt-4",children:"All images are processed locally on your device and are not uploaded to any server."})]}),i.jsx($t,{images:_,onDelete:y=>I(x=>x.filter(h=>h.id!==y))})]})]})})]})}console.log("main.jsx");fr(document.getElementById("root")).render(i.jsx(d.StrictMode,{children:i.jsx(Zt,{})}));
//# sourceMappingURL=index-ZLV98enY.js.map
